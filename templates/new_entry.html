{% extends "base.html" %}

{% block title %}{{ e.title }} • Entrelinhas{% endblock %}

{% block content %}

<div class="reading-wrap">
  <div class="entry-header">
    <div class="entry-title">
      <h1 class="film" style="font-size: 38px; margin: 0 0 10px 0;">{{ e.title }}</h1>
      
      <div class="muted" style="font-family: 'Playfair Display', serif; font-style: italic; font-size: 18px;">
        {% if e.year %}{{ e.year }}{% endif %}
        {% if e.year and e.director %} • {% endif %}
        {% if e.director %}{{ e.director }}{% endif %}
      </div>
    </div>

    {% if e.rating %}
    <div class="pill" style="margin-top: 15px; border-color: var(--accent);">
      ★ {{ e.rating }}/10
    </div>
    {% endif %}

    {% if e.keyword %}
    <div class="pill" style="margin-top: 15px;">
      {{ e.keyword }}
    </div>
    {% endif %}
  </div>

  <div class="prose">
    {% if e.reflection %}
      {{ e.reflection|replace('\n', '<br>')|safe }}
    {% else %}
      <p class="muted" style="font-style: italic;">Sem anotações principais.</p>
    {% endif %}
  </div>

  {% if e.q1 or e.q2 or e.q3 or e.critique_link %}
    <div style="margin-top: 40px;">
      
      {% if e.q1 %}
      <div class="prompt">
        <strong>A cena que ficou:</strong>
        <p style="margin-top: 5px;">{{ e.q1 }}</p>
      </div>
      {% endif %}

      {% if e.q2 %}
      <div class="prompt">
        <strong>O personagem:</strong>
        <p style="margin-top: 5px;">{{ e.q2 }}</p>
      </div>
      {% endif %}

      {% if e.q3 %}
      <div class="prompt">
        <strong>Lembrou de:</strong>
        <p style="margin-top: 5px;">{{ e.q3 }}</p>
      </div>
      {% endif %}

      {% if e.critique_link %}
      <div class="prompt">
        <strong>Referência salva:</strong>
        <p style="margin-top: 5px;">
          <a href="{{ e.critique_link }}" target="_blank" style="text-decoration: underline; color: var(--accent);">
            Acessar link externo ↗
          </a>
        </p>
      </div>
      {% endif %}

    </div>
  {% endif %}

  <div class="section-actions" style="margin-top: 50px; border-top: 1px solid var(--border); padding-top: 20px;">
    
    <a href="{{ url_for('edit_entry', entry_id=e.id) }}" class="btn primary">
      Editar filme
    </a>

    <a href="{{ url_for('index') }}" class="btn secondary">Voltar</a>

    <form action="{{ url_for('delete_entry', entry_id=e.id) }}" method="post" 
          style="display:inline-block; margin-left: auto;"
          onsubmit="return confirm('Tem certeza que quer esquecer esse filme?');">
      <button type="submit" class="btn danger" style="border:none; padding: 10px;">
        Excluir
      </button>
    </form>
    
  </div>
</div>

{% endblock %}
